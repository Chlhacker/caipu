<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta name="theme-color" content="#f97316">
    <title>üç≥ Â¥îÂÆùÁöÑÂæ°ËÜ≥Êàø</title>
    <link rel="manifest" href="manifest.json">
    <!-- LeanCloud SDK -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av-min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #fff7ed;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden; /* Èò≤Ê≠¢Ê®™ÂêëÊªöÂä®Êù° */
        }

        .app {
            width: 100%; /* Èì∫Êª°Êï¥‰∏™Â±èÂπïÂÆΩÂ∫¶ */
            min-height: 100vh; /* Êîπ‰∏∫ min-heightÔºåÈÄÇÂ∫î zoom Áº©Êîæ */
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
        }

        /* Â§¥ÈÉ®ÂØºËà™ */
        .header {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .admin-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .admin-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: white;
        }

        .admin-btn.active {
            background: white;
            color: #f97316;
            border-color: white;
        }

        .nav {
            display: flex;
            gap: 0.75rem;
        }

        .nav-btn {
            padding: 0.5rem 1rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 0.5rem;
            background: transparent;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            position: relative;
        }

        .nav-btn.active {
            background: white;
            color: #f97316;
            border-color: white;
        }

        .badge {
            position: absolute;
            top: -0.5rem;
            right: -0.5rem;
            background: #ef4444;
            color: white;
            font-size: 0.7rem;
            padding: 0.15rem 0.4rem;
            border-radius: 1rem;
            min-width: 1.2rem;
            text-align: center;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫ */
        .main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Â∑¶‰æßÂàÜÁ±ªÂØºËà™ */
        .sidebar {
            width: 200px;
            background: #fff7ed;
            border-right: 2px solid #fed7aa;
            padding: 1rem 0;
            overflow-y: auto;
        }

        .sidebar-title {
            padding: 0 1rem;
            font-size: 0.875rem;
            color: #9a3412;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .category-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            color: #7c2d12;
        }

        .category-item:hover {
            background: #ffedd5;
        }

        .category-item.active {
            background: #fed7aa;
            border-left-color: #f97316;
            color: #ea580c;
            font-weight: 600;
        }

        .category-count {
            float: right;
            background: #f97316;
            color: white;
            font-size: 0.75rem;
            padding: 0.15rem 0.5rem;
            border-radius: 1rem;
            min-width: 1.5rem;
            text-align: center;
        }

        .cart-item {
            border: 1px solid #ffedd5;
        }

        /* Âè≥‰æßÂÜÖÂÆπÂå∫ */
        .content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }



        /* Ê∑ªÂä†ÊåâÈíÆ */
        .add-btn {
            width: 100%;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
            margin-bottom: 1rem;
            transition: transform 0.2s;
        }

        .add-btn:active {
            transform: scale(0.98);
        }

        /* Ë°®ÂçïÂç°Áâá */
        .form-card {
            background: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.1);
            border: 1px solid #fed7aa;
            margin-bottom: 1rem;
        }

        .form-card h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #1f2937;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            color: #374151;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #f97316;
        }

        /* ÂõæÁâá‰∏ä‰º† */
        .image-upload {
            position: relative;
            width: 100%;
            height: 200px;
            border: 2px dashed #fed7aa;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            background: #fff7ed;
        }

        .image-upload:hover {
            border-color: #f97316;
            background: #ffedd5;
        }

        .image-upload input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .image-upload-placeholder {
            text-align: center;
            color: #9a3412;
        }

        .image-upload-placeholder-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .image-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.5rem;
        }

        .image-remove {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #ef4444;
            color: white;
            border: none;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .submit-btn {
            width: 100%;
            background: #f97316;
            color: white;
            border: none;
            padding: 0.875rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .submit-btn:active {
            background: #ea580c;
        }

        .submit-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* ÂàÜÁ±ªÁÆ°ÁêÜÊ†∑Âºè */
        .category-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .category-item-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: white;
            border: 2px solid #ffedd5;
            border-radius: 0.75rem;
            transition: all 0.2s;
        }

        .category-item-card:hover {
            border-color: #fed7aa;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.1);
        }

        .category-item-name {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
            color: #1f2937;
            font-weight: 500;
        }

        .category-item-icon {
            font-size: 1.5rem;
        }

        .category-item-count {
            font-size: 0.875rem;
            color: #9a3412;
            background: #ffedd5;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
        }

        .category-delete-btn {
            background: #fee2e2;
            color: #dc2626;
            border: 2px solid #fecaca;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .category-delete-btn:hover:not(:disabled) {
            background: #fecaca;
            border-color: #fca5a5;
        }

        .category-delete-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ËèúÂìÅÂç°Áâá */
        .dish-card {
            background: white;
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.1);
            border: 1px solid #ffedd5;
            margin-bottom: 1rem;
            transition: all 0.2s;
            display: flex;
            gap: 1rem;
            position: relative;
            min-height: 140px;
        }

        .dish-card:hover {
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.2);
            border-color: #fed7aa;
            transform: translateY(-2px);
        }

        .dish-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            border-radius: 0.75rem;
            background-color: #fff7ed;
            flex-shrink: 0;
        }

        .dish-image-placeholder {
            width: 120px;
            height: 120px;
            border-radius: 0.75rem;
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #fed7aa;
            flex-shrink: 0;
        }

        .dish-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding-right: 3rem;
        }

        .dish-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.5rem;
        }

        .tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.625rem;
            border-radius: 1rem;
            background: #ffedd5;
            color: #9a3412;
        }

        .tag-difficulty {
            background: #fed7aa;
            color: #7c2d12;
            font-weight: 600;
        }

        .tag-difficulty.easy {
            background: #d1fae5;
            color: #065f46;
        }

        .tag-difficulty.medium {
            background: #fef3c7;
            color: #92400e;
        }

        .tag-difficulty.hard {
            background: #fecaca;
            color: #991b1b;
        }

        .tag-category {
            background: #fef3c7;
            color: #92400e;
        }

        .dish-steps {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.6;
            margin-top: auto;
            white-space: pre-line;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            transition: all 0.3s;
        }

        .dish-steps.expanded {
            -webkit-line-clamp: unset;
            display: block;
        }

        .dish-expand-hint {
            color: #f97316;
            font-size: 0.75rem;
            margin-top: 0.25rem;
            cursor: pointer;
            user-select: none;
        }

        .dish-expand-hint:hover {
            text-decoration: underline;
        }

        /* Êï∞ÈáèÊéßÂà∂ */
        .dish-quantity-control {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
        }

        .dish-add-btn {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: 300;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.4);
        }

        .dish-add-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.5);
        }

        .dish-add-btn:active {
            transform: scale(0.95);
        }

        .dish-quantity-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: white;
            border: 2px solid #f97316;
            border-radius: 2rem;
            padding: 0.25rem;
        }

        .dish-qty-btn {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            width: 1.75rem;
            height: 1.75rem;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .dish-qty-btn:hover {
            transform: scale(1.1);
        }

        .dish-qty-btn:active {
            transform: scale(0.9);
        }

        .dish-quantity-num {
            font-size: 1rem;
            font-weight: 600;
            color: #f97316;
            min-width: 1.5rem;
            text-align: center;
        }

        /* Á©∫Áä∂ÊÄÅ */
        .empty {
            text-align: center;
            padding: 3rem 1rem;
            color: #9ca3af;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        /* Ë¥≠Áâ©ËΩ¶ */
        .cart-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #1f2937;
        }

        .cart-item {
            background: white;
            padding: 1.25rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.1);
            border: 1px solid #ffedd5;
            margin-bottom: 1rem;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .item-name {
            font-size: 1.05rem;
            font-weight: 600;
            color: #1f2937;
        }

        .remove-btn {
            background: none;
            border: none;
            color: #ef4444;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            width: 2rem;
            height: 2rem;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .quantity-label {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .quantity-buttons {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .qty-btn {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            border: none;
            background: #e5e7eb;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .qty-btn:active {
            background: #d1d5db;
        }

        .quantity {
            font-weight: 600;
            min-width: 2rem;
            text-align: center;
        }

        .total-card {
            background: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-top: 1.5rem;
        }

        .total-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .total-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
        }

        .total-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f97316;
        }

        .order-btn {
            width: 100%;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }

        .order-btn:active {
            transform: scale(0.98);
        }

        /* ÈöêËóèÁ±ª */
        .hidden {
            display: none;
        }

        /* Â∫ïÈÉ®ÊµÆÂä®Ë¥≠Áâ©ËΩ¶Ê†è */
        .float-cart-bar {
            position: fixed;
            bottom: 0;
            left: 200px; /* ‰∏éÂ∑¶‰æßËæπÊ†èÂØπÈΩê */
            right: 0; /* Âç†Êª°Âè≥‰æßÂÜÖÂÆπÂå∫Âüü */
            height: 60px;
            background: white;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            z-index: 200;
            border-top: 2px solid #fed7aa;
        }

        .cart-icon-btn {
            position: relative;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
            transition: transform 0.2s;
        }

        .cart-icon-btn:active {
            transform: scale(0.95);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            font-size: 0.75rem;
            padding: 0.2rem 0.5rem;
            border-radius: 1rem;
            min-width: 1.5rem;
            text-align: center;
            font-weight: 600;
        }

        .cart-info {
            flex: 1;
            margin: 0 1rem;
            color: #1f2937;
        }

        .cart-total-text {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .cart-total-amount {
            font-size: 1.25rem;
            font-weight: 700;
            color: #f97316;
        }

        .checkout-btn {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
            transition: all 0.2s;
        }

        .checkout-btn:active {
            transform: scale(0.95);
        }

        .checkout-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Ë¥≠Áâ©ËΩ¶ÊäΩÂ±â */
        .cart-drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 300;
            display: none;
            animation: fadeIn 0.3s;
        }

        .cart-drawer-overlay.show {
            display: block;
        }

        .cart-drawer {
            position: fixed;
            bottom: 0;
            left: 200px; /* ‰∏éÂ∫ïÈÉ®Ë¥≠Áâ©ËΩ¶Ê†èÂØπÈΩê */
            right: 0;
            transform: translateY(100%);
            max-height: 70vh;
            background: white;
            border-radius: 1rem 1rem 0 0;
            padding: 1.5rem;
            z-index: 301;
            transition: transform 0.3s ease-out;
            overflow-y: auto;
        }

        .cart-drawer.show {
            transform: translateY(0);
        }

        .cart-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #fed7aa;
        }

        .cart-drawer-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
        }

        .cart-drawer-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 2rem;
            height: 2rem;
        }

        .cart-drawer-item {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .cart-drawer-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 0.5rem;
            margin-right: 1rem;
            background: #fff7ed;
        }

        .cart-drawer-item-placeholder {
            width: 60px;
            height: 60px;
            border-radius: 0.5rem;
            margin-right: 1rem;
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #fed7aa;
        }

        .cart-drawer-item-info {
            flex: 1;
        }

        .cart-drawer-item-name {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .cart-drawer-item-category {
            font-size: 0.75rem;
            color: #92400e;
            background: #fef3c7;
            padding: 0.15rem 0.5rem;
            border-radius: 0.5rem;
            display: inline-block;
        }

        .cart-drawer-item-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .cart-drawer-qty-btn {
            width: 1.75rem;
            height: 1.75rem;
            border-radius: 50%;
            border: none;
            background: #fed7aa;
            color: #7c2d12;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .cart-drawer-qty-btn:active {
            background: #fdba74;
        }

        .cart-drawer-quantity {
            font-weight: 600;
            min-width: 2rem;
            text-align: center;
            color: #1f2937;
        }

        .cart-drawer-empty {
            text-align: center;
            padding: 3rem 1rem;
            color: #9ca3af;
        }

        .cart-drawer-empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Ë∞ÉÊï¥‰∏ªÂÜÖÂÆπÂå∫Â∫ïÈÉ®ËæπË∑ùÔºåÈÅøÂÖçË¢´Ë¥≠Áâ©ËΩ¶Ê†èÈÅÆÊå° */
        .content {
            padding-bottom: 80px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ÁÆ°ÁêÜÂºπÁ™ó */
        .admin-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 400;
            display: none;
            animation: fadeIn 0.3s;
        }

        .admin-modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-modal {
            background: white;
            border-radius: 1rem;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }

        .admin-modal-header {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .admin-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .admin-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .admin-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .admin-modal-body {
            padding: 1.5rem;
        }

        .admin-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #fed7aa;
        }

        .admin-tab {
            padding: 0.75rem 1.5rem;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .admin-tab.active {
            color: #f97316;
            border-bottom-color: #f97316;
            font-weight: 600;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        .admin-dish-list {
            display: grid;
            gap: 1rem;
        }

        .admin-dish-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: #fff7ed;
            border-radius: 0.75rem;
            border: 1px solid #fed7aa;
            gap: 1rem;
        }

        .admin-dish-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 0.5rem;
            flex-shrink: 0;
        }

        .admin-dish-placeholder {
            width: 80px;
            height: 80px;
            border-radius: 0.5rem;
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #fed7aa;
            flex-shrink: 0;
        }

        .admin-dish-info {
            flex: 1;
        }

        .admin-dish-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .admin-dish-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .admin-dish-actions {
            display: flex;
            gap: 0.5rem;
        }

        .admin-action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .admin-edit-btn {
            background: #dbeafe;
            color: #1e40af;
        }

        .admin-edit-btn:hover {
            background: #bfdbfe;
        }

        .admin-delete-btn {
            background: #fee2e2;
            color: #dc2626;
        }

        .admin-delete-btn:hover {
            background: #fecaca;
        }

        .admin-edit-form {
            background: #eff6ff;
            border: 2px solid #bfdbfe;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .admin-edit-form-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 1rem;
        }

        .admin-form-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        .admin-save-btn {
            background: #10b981;
            color: white;
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .admin-save-btn:hover {
            background: #059669;
        }

        .admin-cancel-btn {
            background: #e5e7eb;
            color: #4b5563;
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .admin-cancel-btn:hover {
            background: #d1d5db;
        }

        .admin-save-btn:disabled,
        .admin-cancel-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* ËÆ¢ÂçïÂºπÁ™ó */
        .order-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 400;
            display: none;
            animation: fadeIn 0.3s;
        }

        .order-modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-modal {
            background: white;
            border-radius: 1rem;
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }

        .order-modal-header {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .order-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .order-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .order-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .order-modal-body {
            padding: 1.5rem;
        }

        .order-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .order-card {
            background: white;
            border: 2px solid #ffedd5;
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .order-card:hover {
            border-color: #fed7aa;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.15);
        }

        .order-card.completed {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #fed7aa;
        }

        .order-info {
            flex: 1;
        }

        .order-id {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }

        .order-time {
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .order-status {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .order-status.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .order-status.completed {
            background: #d1fae5;
            color: #065f46;
        }

        .order-items {
            margin-bottom: 1rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            color: #4b5563;
        }

        .order-item-name {
            font-weight: 500;
        }

        .order-item-quantity {
            color: #f97316;
            font-weight: 600;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 2px solid #fed7aa;
            margin-bottom: 1rem;
        }

        .order-total-label {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
        }

        .order-total-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: #f97316;
        }

        .order-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }

        .order-action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .order-complete-btn {
            background: #d1fae5;
            color: #065f46;
        }

        .order-complete-btn:hover {
            background: #a7f3d0;
        }

        .order-delete-btn {
            background: #fee2e2;
            color: #dc2626;
        }

        .order-delete-btn:hover {
            background: #fecaca;
        }

        .order-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .order-empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* ÂøÉÊÑøÂ¢ôÂºπÁ™ó */
        .wish-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 400;
            display: none;
            animation: fadeIn 0.3s;
        }

        .wish-modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wish-modal {
            background: white;
            border-radius: 1rem;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }

        .wish-modal-header {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .wish-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .wish-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .wish-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .wish-modal-body {
            padding: 1.5rem;
        }

        .wish-add-form {
            background: #fef3c7;
            padding: 1.5rem;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            border: 2px solid #fde68a;
        }

        .wish-add-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 1rem;
        }

        .wish-input-group {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .wish-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #fde68a;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .wish-input:focus {
            outline: none;
            border-color: #fbbf24;
        }

        .wish-add-btn {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .wish-add-btn:active {
            transform: scale(0.98);
        }

        .wish-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .wish-card {
            background: white;
            border: 2px solid #fde68a;
            border-radius: 1rem;
            padding: 1.25rem;
            transition: all 0.2s;
            position: relative;
        }

        .wish-card:hover {
            border-color: #fbbf24;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);
        }

        .wish-card.completed {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .wish-card.added {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }

        .wish-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .wish-info {
            flex: 1;
        }

        .wish-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .wish-note {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .wish-status {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .wish-status.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .wish-status.added {
            background: #d1fae5;
            color: #065f46;
        }

        .wish-status.learning {
            background: #dbeafe;
            color: #1e40af;
        }

        .wish-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .wish-action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .wish-learning-btn {
            background: #dbeafe;
            color: #1e40af;
        }

        .wish-learning-btn:hover {
            background: #bfdbfe;
        }

        .wish-added-btn {
            background: #d1fae5;
            color: #065f46;
        }

        .wish-added-btn:hover {
            background: #a7f3d0;
        }

        .wish-delete-btn {
            background: #fee2e2;
            color: #dc2626;
        }

        .wish-delete-btn:hover {
            background: #fecaca;
        }

        .wish-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .wish-empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Êï∞ÊçÆÁÆ°ÁêÜÂºπÁ™ó */
        .data-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 400;
            display: none;
            animation: fadeIn 0.3s;
        }

        .data-modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .data-modal {
            background: white;
            border-radius: 1rem;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }

        .data-modal-header {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .data-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .data-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .data-modal-body {
            padding: 1.5rem;
        }

        .data-section {
            background: #f9fafb;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 2px solid #e5e7eb;
        }

        .data-section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .data-section-desc {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .data-action-btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .data-export-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .data-export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }

        .data-import-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .data-import-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .data-clear-btn {
            background: #fee2e2;
            color: #dc2626;
        }

        .data-clear-btn:hover {
            background: #fecaca;
        }

        .data-info {
            background: #eff6ff;
            border: 2px solid #dbeafe;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .data-info-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.5rem;
        }

        .data-info-item {
            color: #4b5563;
            font-size: 0.875rem;
            padding: 0.25rem 0;
            display: flex;
            justify-content: space-between;
        }

        .data-info-value {
            font-weight: 600;
            color: #8b5cf6;
        }

        .file-input-hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="app" class="app">
        <header class="header">
            <div class="header-content">
                <h1 class="header-title">üç≥ Â¥îÂÆùÁöÑÂæ°ËÜ≥Êàø</h1>
                <div class="header-buttons">
                    <button class="admin-btn" @click="openWishModal">
                        üíõ ÂøÉÊÑøÂ¢ô
                    </button>
                    <button class="admin-btn" @click="openOrderModal">
                        üìã ËÆ¢Âçï
                    </button>
                    <button class="admin-btn" @click="exportDataDialog">
                        üíæ ÂØºÂá∫
                    </button>
                    <button class="admin-btn" @click="openAdminModal">
                        ‚öôÔ∏è ÁÆ°ÁêÜ
                    </button>
                </div>
            </div>
        </header>

        <main class="main">
            <!-- Â∑¶‰æßÂàÜÁ±ªÂØºËà™ -->
            <aside class="sidebar">
                <div class="sidebar-title">ËèúÂìÅÂàÜÁ±ª</div>
                <div 
                    v-for="cat in categories" 
                    :key="cat"
                    class="category-item"
                    :class="{active: currentCategory === cat}"
                    @click="currentCategory = cat"
                >
                    {{ cat }}
                    <span class="category-count">{{ getCategoryCount(cat) }}</span>
                </div>
            </aside>

            <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
            <div class="content">
            <!-- ËèúÂìÅÈ°µÈù¢ -->
            <div v-show="view === 'dishes'">
                <!-- ËèúÂìÅÂàóË°® -->
                <div v-if="filteredDishes.length === 0" class="empty">
                    <div class="empty-icon">üçΩÔ∏è</div>
                    <p>{{ currentCategory }}ÂàÜÁ±ª‰∏ãËøòÊ≤°ÊúâËèúÂìÅ<br>ÁÇπÂáªÂè≥‰∏äËßí‚ÄúÁÆ°ÁêÜ‚ÄùÊåâÈíÆÊ∑ªÂä†ÂêßÔºÅ</p>
                </div>

                <div v-for="dish in filteredDishes" :key="dish.id" class="dish-card">
                    <img v-if="dish.image" :src="dish.image" class="dish-image" :alt="dish.name">
                    <div v-else class="dish-image-placeholder">üç≤</div>
                    
                    <div class="dish-content">
                        <div class="dish-name">{{ dish.name }}</div>
                        <div class="tags">
                            <span class="tag tag-category">{{ dish.category }}</span>
                            <span v-for="tag in dish.tags" :key="tag" class="tag">{{ tag }}</span>
                            <span class="tag tag-difficulty" :class="getDifficultyClass(dish.difficulty)">{{ dish.difficulty }}</span>
                        </div>
                        <div v-if="dish.steps">
                            <div class="dish-steps" :class="{expanded: isDishExpanded(dish.id)}">{{ dish.steps }}</div>
                            <div v-if="isDishStepsTruncated(dish.steps)" class="dish-expand-hint" @click="toggleDishExpand(dish.id)">
                                {{ isDishExpanded(dish.id) ? 'Êî∂Ëµ∑ ‚ñ≤' : 'Â±ïÂºÄÊõ¥Â§ö ‚ñº' }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="dish-quantity-control">
                        <button v-if="!getDishQuantity(dish.id)" class="dish-add-btn" @click="addToCart(dish)">
                            +
                        </button>
                        <div v-else class="dish-quantity-display">
                            <button class="dish-qty-btn" @click="decreaseDishQty(dish)">‚àí</button>
                            <span class="dish-quantity-num">{{ getDishQuantity(dish.id) }}</span>
                            <button class="dish-qty-btn" @click="increaseDishQty(dish)">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ë¥≠Áâ©ËΩ¶È°µÈù¢ -->
            <div v-show="view === 'cart'">
                <h2 class="cart-title">Ë¥≠Áâ©ËΩ¶</h2>

                <div v-if="cart.length === 0" class="empty">
                    <div class="empty-icon">üõí</div>
                    <p>Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑ<br>ÂéªËèúÂìÅÈ°µÈù¢Ê∑ªÂä†ÊÉ≥ÂÅöÁöÑËèúÂêßÔºÅ</p>
                </div>

                <div v-else>
                    <div v-for="item in cart" :key="item.id" class="cart-item">
                        <img v-if="item.image" :src="item.image" class="dish-image" :alt="item.name">
                        <div v-else class="dish-image-placeholder">üç≤</div>
                        <div class="item-header">
                            <div>
                                <div class="item-name">{{ item.name }}</div>
                                <div class="tags">
                                    <span class="tag tag-category">{{ item.category }}</span>
                                    <span v-for="tag in item.tags" :key="tag" class="tag">{{ tag }}</span>
                                </div>
                            </div>
                            <button class="remove-btn" @click="removeFromCart(item.id)">‚úï</button>
                        </div>
                        <div class="quantity-control">
                            <span class="quantity-label">Êï∞Èáè:</span>
                            <div class="quantity-buttons">
                                <button class="qty-btn" @click="decreaseQty(item)">-</button>
                                <span class="quantity">{{ item.quantity }}</span>
                                <button class="qty-btn" @click="increaseQty(item)">+</button>
                            </div>
                        </div>
                    </div>

                    <div class="total-card">
                        <div class="total-info">
                            <span class="total-label">ÊÄªËÆ°</span>
                            <span class="total-value">{{ totalItems }} ÈÅìËèú</span>
                        </div>
                        <button class="order-btn" @click="placeOrder">Á°ÆËÆ§‰∏ãÂçï</button>
                    </div>
                </div>
            </div>
            </div>
        </main>

        <!-- Â∫ïÈÉ®ÊµÆÂä®Ë¥≠Áâ©ËΩ¶Ê†è -->
        <div class="float-cart-bar" v-show="view === 'dishes'">
            <button class="cart-icon-btn" @click="toggleCartDrawer">
                üõí
                <span v-if="cartCount > 0" class="cart-badge">{{ cartCount }}</span>
            </button>
            
            <div class="cart-info" @click="toggleCartDrawer">
                <div class="cart-total-text">Â∑≤ÈÄâ</div>
                <div class="cart-total-amount">{{ totalItems }} ÈÅìËèú</div>
            </div>
            
            <button class="checkout-btn" :disabled="cart.length === 0" @click="placeOrder">
                Á°ÆËÆ§‰∏ãÂçï
            </button>
        </div>

        <!-- Ë¥≠Áâ©ËΩ¶ÊäΩÂ±â -->
        <div class="cart-drawer-overlay" :class="{show: showCartDrawer}" @click="closeCartDrawer"></div>
        <div class="cart-drawer" :class="{show: showCartDrawer}">
            <div class="cart-drawer-header">
                <div class="cart-drawer-title">Ë¥≠Áâ©ËΩ¶ ({{ cartCount }})</div>
                <button class="cart-drawer-close" @click="closeCartDrawer">‚úï</button>
            </div>
            
            <div v-if="cart.length === 0" class="cart-drawer-empty">
                <div class="cart-drawer-empty-icon">üõí</div>
                <p>Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑ</p>
            </div>
            
            <div v-else>
                <div v-for="item in cart" :key="item.id" class="cart-drawer-item">
                    <img v-if="item.image" :src="item.image" class="cart-drawer-item-image" :alt="item.name">
                    <div v-else class="cart-drawer-item-placeholder">üç≤</div>
                    
                    <div class="cart-drawer-item-info">
                        <div class="cart-drawer-item-name">{{ item.name }}</div>
                        <div class="cart-drawer-item-category">{{ item.category }}</div>
                    </div>
                    
                    <div class="cart-drawer-item-controls">
                        <button class="cart-drawer-qty-btn" @click="decreaseQty(item)">-</button>
                        <span class="cart-drawer-quantity">{{ item.quantity }}</span>
                        <button class="cart-drawer-qty-btn" @click="increaseQty(item)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÁÆ°ÁêÜÂºπÁ™ó -->
        <div class="admin-modal-overlay" :class="{show: showAdminModal}" @click="closeAdminModal">
            <div class="admin-modal" @click.stop>
                <div class="admin-modal-header">
                    <h2 class="admin-modal-title">‚öôÔ∏è Â¥îÂÆùÁöÑÂæ°ËÜ≥Êàø - ËèúÂìÅÁÆ°ÁêÜ</h2>
                    <button class="admin-modal-close" @click="closeAdminModal">‚úï</button>
                </div>
                <div class="admin-modal-body">
                    <!-- ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
                    <div class="admin-tabs">
                        <button 
                            class="admin-tab" 
                            :class="{active: adminTab === 'add'}"
                            @click="adminTab = 'add'"
                        >
                            ‚ûï Ê∑ªÂä†ËèúÂìÅ
                        </button>
                        <button 
                            class="admin-tab" 
                            :class="{active: adminTab === 'manage'}"
                            @click="adminTab = 'manage'"
                        >
                            üìã ÁÆ°ÁêÜËèúÂìÅ
                        </button>
                        <button 
                            class="admin-tab" 
                            :class="{active: adminTab === 'category'}"
                            @click="adminTab = 'category'"
                        >
                            üìÇ ÁÆ°ÁêÜÂàÜÁ±ª
                        </button>
                    </div>

                    <!-- Ê∑ªÂä†ËèúÂìÅ -->
                    <div class="admin-tab-content" :class="{active: adminTab === 'add'}">
                        <div class="form-card">
                            <form @submit.prevent="addDish">
                                <div class="form-group">
                                    <label class="form-label">ËèúÂìÅÂõæÁâá</label>
                                    <div class="image-upload">
                                        <input type="file" accept="image/*" @change="handleImageUpload">
                                        <div v-if="!newDish.image" class="image-upload-placeholder">
                                            <div class="image-upload-placeholder-icon">üì∑</div>
                                            <div>ÁÇπÂáª‰∏ä‰º†ËèúÂìÅÂõæÁâá</div>
                                        </div>
                                        <img v-else :src="newDish.image" class="image-preview">
                                        <button v-if="newDish.image" type="button" class="image-remove" @click="removeImage">‚úï</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ËèúÂìÅÂàÜÁ±ª *</label>
                                    <select v-model="newDish.category" class="form-select" required>
                                        <option value="">ËØ∑ÈÄâÊã©ÂàÜÁ±ª</option>
                                        <option v-for="cat in categories" :key="cat" :value="cat">{{ cat }}</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ËèúÂêç *</label>
                                    <input v-model="newDish.name" type="text" class="form-input" placeholder="‰æãÂ¶ÇÔºöÂÆ´‰øùÈ∏°‰∏Å" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Ê†áÁ≠æÔºàÈÄóÂè∑ÂàÜÈöîÔºâ</label>
                                    <input v-model="newDish.tagsStr" type="text" class="form-input" placeholder="‰æãÂ¶ÇÔºöÂ∑ùËèú,Ëæ£,Ëç§Ëèú">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ÈöæÂ∫¶</label>
                                    <select v-model="newDish.difficulty" class="form-select">
                                        <option>ÁÆÄÂçï</option>
                                        <option>‰∏≠Á≠â</option>
                                        <option>Âõ∞Èöæ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Âà∂‰ΩúÊ≠•È™§</label>
                                    <textarea v-model="newDish.steps" class="form-textarea" placeholder="ÊØèË°å‰∏Ä‰∏™Ê≠•È™§&#10;1. ÂáÜÂ§áÈ£üÊùê&#10;2. Â§ÑÁêÜÈ£üÊùê&#10;3. ÁÉπÈ•™..."></textarea>
                                </div>
                                <button type="submit" class="submit-btn" :disabled="isSubmitting">
                                    <span v-if="!isSubmitting">üíæ ‰øùÂ≠òËèúÂìÅ</span>
                                    <span v-else>‚è≥ ‰øùÂ≠ò‰∏≠...</span>
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- ÁÆ°ÁêÜËèúÂìÅ -->
                    <div class="admin-tab-content" :class="{active: adminTab === 'manage'}">
                        <div v-if="dishes.length === 0" class="empty">
                            <div class="empty-icon">üçΩÔ∏è</div>
                            <p>ËøòÊ≤°Êúâ‰ªª‰ΩïËèúÂìÅ<br>ËØ∑ÂÖàÊ∑ªÂä†ËèúÂìÅ</p>
                        </div>
                        <div v-else class="admin-dish-list">
                            <div v-for="dish in dishes" :key="dish.id" class="admin-dish-item">
                                <img v-if="dish.image" :src="dish.image" class="admin-dish-image" :alt="dish.name">
                                <div v-else class="admin-dish-placeholder">üç≤</div>
                                <div class="admin-dish-info">
                                    <div class="admin-dish-name">{{ dish.name }}</div>
                                    <div class="admin-dish-meta">
                                        <span class="tag tag-category">{{ dish.category }}</span>
                                        <span v-for="tag in dish.tags" :key="tag" class="tag">{{ tag }}</span>
                                        <span class="tag tag-difficulty" :class="getDifficultyClass(dish.difficulty)">{{ dish.difficulty }}</span>
                                    </div>
                                </div>
                                <div class="admin-dish-actions">
                                    <button class="admin-action-btn admin-edit-btn" @click="startEditDish(dish)">
                                        ‚úèÔ∏è ÁºñËæë
                                    </button>
                                    <button class="admin-action-btn admin-delete-btn" @click="deleteDish(dish.id)">
                                        üóëÔ∏è Âà†Èô§
                                    </button>
                                </div>
                                
                                <!-- ÁºñËæëË°®Âçï -->
                                <div v-if="editingDishId === dish.id" class="admin-edit-form">
                                    <div class="admin-edit-form-title">‚úèÔ∏è ÁºñËæëËèúÂìÅ‰ø°ÊÅØ</div>
                                    <div class="form-group">
                                        <label class="form-label">ËèúÂìÅÂõæÁâá</label>
                                        <div class="image-upload">
                                            <input type="file" accept="image/*" @change="handleEditImageUpload">
                                            <div v-if="!editingDish.image" class="image-upload-placeholder">
                                                <div class="image-upload-placeholder-icon">üì∑</div>
                                                <div>ÁÇπÂáª‰∏ä‰º†ËèúÂìÅÂõæÁâá</div>
                                            </div>
                                            <img v-else :src="editingDish.image" class="image-preview">
                                            <button v-if="editingDish.image" type="button" class="image-remove" @click="removeEditImage">‚úï</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ËèúÂìÅÂàÜÁ±ª *</label>
                                        <select v-model="editingDish.category" class="form-select" required>
                                            <option value="">ËØ∑ÈÄâÊã©ÂàÜÁ±ª</option>
                                            <option v-for="cat in categories" :key="cat" :value="cat">{{ cat }}</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ËèúÂêç *</label>
                                        <input v-model="editingDish.name" type="text" class="form-input" placeholder="‰æãÂ¶ÇÔºöÂÆ´‰øùÈ∏°‰∏Å" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Ê†áÁ≠æÔºàÈÄóÂè∑ÂàÜÈöîÔºâ</label>
                                        <input v-model="editingDish.tagsStr" type="text" class="form-input" placeholder="‰æãÂ¶ÇÔºöÂ∑ùËèú,Ëæ£,Ëç§Ëèú">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ÈöæÂ∫¶</label>
                                        <select v-model="editingDish.difficulty" class="form-select">
                                            <option>ÁÆÄÂçï</option>
                                            <option>‰∏≠Á≠â</option>
                                            <option>Âõ∞Èöæ</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Âà∂‰ΩúÊ≠•È™§</label>
                                        <textarea v-model="editingDish.steps" class="form-textarea" placeholder="ÊØèË°å‰∏Ä‰∏™Ê≠•È™§&#10;1. ÂáÜÂ§áÈ£üÊùê&#10;2. Â§ÑÁêÜÈ£üÊùê&#10;3. ÁÉπÈ•™..."></textarea>
                                    </div>
                                    <div class="admin-form-actions">
                                        <button class="admin-cancel-btn" @click="cancelEdit" :disabled="isSubmitting">ÂèñÊ∂à</button>
                                        <button class="admin-save-btn" @click="saveEdit" :disabled="isSubmitting">
                                            <span v-if="!isSubmitting">üíæ ‰øùÂ≠ò‰øÆÊîπ</span>
                                            <span v-else>‚è≥ ‰øùÂ≠ò‰∏≠...</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁÆ°ÁêÜÂàÜÁ±ª -->
                    <div class="admin-tab-content" :class="{active: adminTab === 'category'}">
                        <div class="form-card">
                            <div class="category-section">
                                <h3 style="margin-bottom: 1rem; color: #f97316;">‚ûï Ê∑ªÂä†Êñ∞ÂàÜÁ±ª</h3>
                                <div style="display: flex; gap: 0.5rem;">
                                    <input 
                                        v-model="newCategoryName" 
                                        type="text" 
                                        class="form-input" 
                                        placeholder="ËæìÂÖ•ÂàÜÁ±ªÂêçÁß∞Ôºå‰æãÂ¶ÇÔºöÁ≤§Ëèú"
                                        @keyup.enter="addCategory"
                                        style="flex: 1;"
                                    >
                                    <button class="submit-btn" @click="addCategory" style="width: auto; padding: 0 2rem;">
                                        ‚ûï Ê∑ªÂä†
                                    </button>
                                </div>
                            </div>

                            <div class="category-section" style="margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem; color: #f97316;">üìÇ Â∑≤ÊúâÂàÜÁ±ª</h3>
                                <div v-if="categories.length === 0" class="empty" style="padding: 2rem;">
                                    <p>ËøòÊ≤°Êúâ‰ªª‰ΩïÂàÜÁ±ª</p>
                                </div>
                                <div v-else class="category-list">
                                    <div v-for="(cat, index) in categories" :key="cat" class="category-item-card">
                                        <div class="category-item-name">
                                            <span class="category-item-icon">üìÇ</span>
                                            <span>{{ cat }}</span>
                                            <span class="category-item-count">({{ getCategoryCount(cat) }} ÈÅìËèú)</span>
                                        </div>
                                        <button 
                                            class="category-delete-btn" 
                                            @click="deleteCategory(cat)"
                                            :disabled="getCategoryCount(cat) > 0"
                                        >
                                            üóëÔ∏è Âà†Èô§
                                        </button>
                                    </div>
                                </div>
                                <div style="margin-top: 1rem; padding: 1rem; background: #fff7ed; border-radius: 0.5rem; border-left: 4px solid #f97316;">
                                    <strong style="color: #ea580c;">‚ö†Ô∏è ÊèêÁ§∫Ôºö</strong>
                                    <ul style="margin: 0.5rem 0 0 1.5rem; color: #9a3412; line-height: 1.8;">
                                        <li>Âè™ÊúâÁ©∫ÂàÜÁ±ªÔºàÊ≤°ÊúâËèúÂìÅÔºâÊâçËÉΩÂà†Èô§</li>
                                        <li>Âà†Èô§ÂàÜÁ±ªÂâçÔºåËØ∑ÂÖàÂà†Èô§ÊàñÁßªÂä®ËØ•ÂàÜÁ±ª‰∏ãÁöÑÊâÄÊúâËèúÂìÅ</li>
                                        <li>ÂàÜÁ±ª‰øÆÊîπÂêé‰ºöÁ´ãÂç≥‰øùÂ≠òÂà∞‰∫ëÁ´Ø</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËÆ¢ÂçïÂºπÁ™ó -->
        <div class="order-modal-overlay" :class="{show: showOrderModal}" @click="closeOrderModal">
            <div class="order-modal" @click.stop>
                <div class="order-modal-header">
                    <h2 class="order-modal-title">üìã ÂéÜÂè≤ËÆ¢Âçï</h2>
                    <button class="order-modal-close" @click="closeOrderModal">‚úï</button>
                </div>
                <div class="order-modal-body">
                    <div v-if="orders.length === 0" class="order-empty">
                        <div class="order-empty-icon">üìÑ</div>
                        <p>ËøòÊ≤°ÊúâËÆ¢ÂçïËÆ∞ÂΩï<br>ÂéªÁÇπËèúÈ°µÈù¢Âä†Ëèú‰∏ãÂçïÂêßÔºÅ</p>
                    </div>
                    <div v-else class="order-list">
                        <div v-for="order in sortedOrders" :key="order.id" class="order-card" :class="{completed: order.status === 'completed'}">
                            <div class="order-header">
                                <div class="order-info">
                                    <div class="order-id">ËÆ¢ÂçïÁºñÂè∑Ôºö{{ order.id }}</div>
                                    <div class="order-time">üïí {{ order.createdAt }}</div>
                                </div>
                                <div class="order-status" :class="order.status === 'completed' ? 'completed' : 'pending'">
                                    {{ order.status === 'completed' ? '‚úÖ Â∑≤ÂÆåÊàê' : 'üïí ËøõË°å‰∏≠' }}
                                </div>
                            </div>
                            <div class="order-items">
                                <div v-for="item in order.items" :key="item.id" class="order-item">
                                    <span class="order-item-name">{{ item.name }}</span>
                                    <span class="order-item-quantity">√ó {{ item.quantity }}</span>
                                </div>
                            </div>
                            <div class="order-total">
                                <span class="order-total-label">ÊÄªËÆ°</span>
                                <span class="order-total-value">{{ order.total }} ÈÅìËèú</span>
                            </div>
                            <div class="order-actions">
                                <button v-if="order.status !== 'completed'" class="order-action-btn order-complete-btn" @click="completeOrder(order.id)">
                                    ‚úÖ Ê†áËÆ∞ÂÆåÊàê
                                </button>
                                <button class="order-action-btn order-delete-btn" @click="deleteOrder(order.id)">
                                    üóëÔ∏è Âà†Èô§ËÆ¢Âçï
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂøÉÊÑøÂ¢ôÂºπÁ™ó -->
        <div class="wish-modal-overlay" :class="{show: showWishModal}" @click="closeWishModal">
            <div class="wish-modal" @click.stop>
                <div class="wish-modal-header">
                    <h2 class="wish-modal-title">üíõ ÂøÉÊÑøÂ¢ô - ÊÉ≥ÂêÉÁöÑËèú</h2>
                    <button class="wish-modal-close" @click="closeWishModal">‚úï</button>
                </div>
                <div class="wish-modal-body">
                    <!-- Ê∑ªÂä†ÂøÉÊÑøË°®Âçï -->
                    <div class="wish-add-form">
                        <div class="wish-add-title">‚ú® Ê∑ªÂä†Êñ∞ÂøÉÊÑø</div>
                        <div class="wish-input-group">
                            <input 
                                v-model="newWish.name" 
                                type="text" 
                                class="wish-input" 
                                placeholder="ÊÉ≥ÂêÉ‰ªÄ‰πàËèúÔºüÔºàÂøÖÂ°´Ôºâ"
                                @keyup.enter="addWish"
                            >
                            <button class="wish-add-btn" @click="addWish">‚ûï Ê∑ªÂä†</button>
                        </div>
                        <input 
                            v-model="newWish.note" 
                            type="text" 
                            class="wish-input" 
                            placeholder="Â§áÊ≥®ÔºàÂèØÈÄâÔºâÔºö‰æãÂ¶ÇÊÉ≥ÂêÉÁöÑÂéüÂõ†„ÄÅÂè£Âë≥ÂñúÂ•ΩÁ≠â"
                            @keyup.enter="addWish"
                        >
                    </div>

                    <!-- ÂøÉÊÑøÂàóË°® -->
                    <div v-if="wishes.length === 0" class="wish-empty">
                        <div class="wish-empty-icon">üåü</div>
                        <p>ËøòÊ≤°ÊúâÂøÉÊÑø<br>Ê∑ªÂä†‰Ω†ÊÉ≥ÂêÉÁöÑËèúÂêßÔºÅ</p>
                    </div>
                    <div v-else class="wish-list">
                        <div v-for="wish in sortedWishes" :key="wish.id" class="wish-card" :class="wish.status">
                            <div class="wish-content">
                                <div class="wish-info">
                                    <div class="wish-name">üç≤ {{ wish.name }}</div>
                                    <div v-if="wish.note" class="wish-note">üìù {{ wish.note }}</div>
                                </div>
                                <div class="wish-status" :class="wish.status">
                                    <span v-if="wish.status === 'pending'">üïí ÂæÖÂÆûÁé∞</span>
                                    <span v-else-if="wish.status === 'learning'">üìö Â≠¶‰π†‰∏≠</span>
                                    <span v-else-if="wish.status === 'added'">‚úÖ Â∑≤Âä†ÂÖ•</span>
                                </div>
                            </div>
                            <div class="wish-actions">
                                <button v-if="wish.status === 'pending'" class="wish-action-btn wish-learning-btn" @click="updateWishStatus(wish.id, 'learning')">
                                    üìö ÂºÄÂßãÂ≠¶‰π†
                                </button>
                                <button v-if="wish.status === 'learning'" class="wish-action-btn wish-added-btn" @click="updateWishStatus(wish.id, 'added')">
                                    ‚úÖ Â∑≤Âä†ÂÖ•ËèúÂçï
                                </button>
                                <button v-if="wish.status === 'pending'" class="wish-action-btn wish-added-btn" @click="updateWishStatus(wish.id, 'added')">
                                    ‚úÖ Áõ¥Êé•Âä†ÂÖ•ËèúÂçï
                                </button>
                                <button class="wish-action-btn wish-delete-btn" @click="deleteWish(wish.id)">
                                    üóëÔ∏è Âà†Èô§
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂØºÂá∫Êï∞ÊçÆÂØπËØùÊ°Ü -->
        <div class="data-modal-overlay" :class="{show: showExportDialog}" @click="closeExportDialog">
            <div class="data-modal" @click.stop style="max-width: 500px;">
                <div class="data-modal-header">
                    <h2 class="data-modal-title">üíæ ÂØºÂá∫Êï∞ÊçÆÂà∞Êú¨Âú∞</h2>
                    <button class="data-modal-close" @click="closeExportDialog">‚úï</button>
                </div>
                <div class="data-modal-body">
                    <div class="data-section">
                        <div class="data-info">
                            <div class="data-info-title">üìä ÂΩìÂâç‰∫ëÁ´ØÊï∞ÊçÆÁªüËÆ°</div>
                            <div class="data-info-item">
                                <span>ËèúÂìÅÊï∞ÈáèÔºö</span>
                                <span class="data-info-value">{{ dishes.length }} ÈÅì</span>
                            </div>
                            <div class="data-info-item">
                                <span>ËÆ¢ÂçïÊï∞ÈáèÔºö</span>
                                <span class="data-info-value">{{ orders.length }} ‰∏™</span>
                            </div>
                            <div class="data-info-item">
                                <span>ÂøÉÊÑøÊï∞ÈáèÔºö</span>
                                <span class="data-info-value">{{ wishes.length }} ‰∏™</span>
                            </div>
                        </div>
                        
                        <div class="data-section-desc" style="margin: 1.5rem 0; padding: 1rem; background: #eff6ff; border-radius: 0.5rem; border-left: 4px solid #3b82f6;">
                            <strong style="color: #1e40af;">üí° ÂØºÂá∫ËØ¥ÊòéÔºö</strong><br>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem; color: #1e40af; line-height: 1.8;">
                                <li>Â∞Ü‰ªé LeanCloud ‰∫ëÁ´ØËé∑ÂèñÊúÄÊñ∞Êï∞ÊçÆÂπ∂ÂØºÂá∫Âà∞Êú¨Âú∞ JSON Êñá‰ª∂</li>
                                <li>ÂèØÁî®‰∫éÊï∞ÊçÆÂ§á‰ªΩ„ÄÅËøÅÁßªÊàñÁ¶ªÁ∫øÊü•Áúã</li>
                                <li>Âª∫ËÆÆÂÆöÊúüÂØºÂá∫Â§á‰ªΩÔºåÁ°Æ‰øùÊï∞ÊçÆÂÆâÂÖ®</li>
                            </ul>
                        </div>
                        
                        <button class="data-action-btn data-export-btn" @click="confirmExportData" style="width: 100%; font-size: 1.1rem; padding: 1rem;">
                            ‚úÖ Á°ÆËÆ§ÂØºÂá∫
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    view: 'dishes',
                    showForm: false,
                    showCartDrawer: false,
                    showAdminModal: false,
                    showOrderModal: false,
                    showWishModal: false,
                    showExportDialog: false,
                    adminTab: 'add',
                    expandedDishes: {},
                    categories: ['Áé∞ÁÇíËÇâÁ±ª', 'Ëî¨Ëèú', 'ÁÇñÊ±§', 'ÁÉßÁÉ§', 'È•ÆÊñô', 'Â∞èÂêÉ', 'ÂÜÖËíôÈ£éÂë≥', 'Á≤§ÂºèÊó©ÁÇπ','ÂÖªÁîüËå∂'],
                    currentCategory: 'Áé∞ÁÇíËÇâÁ±ª',
                    dishes: [],
                    cart: [],
                    orders: [],
                    wishes: [],
                    newWish: {
                        name: '',
                        note: ''
                    },
                    newCategoryName: '',
                    isSubmitting: false, // Êèê‰∫§‰∏≠Áä∂ÊÄÅ
                    editingDishId: null,
                    editingDish: {
                        name: '',
                        category: '',
                        image: '',
                        tagsStr: '',
                        difficulty: 'ÁÆÄÂçï',
                        steps: ''
                    },
                    newDish: {
                        name: '',
                        category: '',
                        image: '',
                        tagsStr: '',
                        difficulty: 'ÁÆÄÂçï',
                        steps: ''
                    },
                    saveTimeout: null, // Áî®‰∫éÈò≤Êäñ
                    refreshInterval: null // Áî®‰∫éËá™Âä®Âà∑Êñ∞
                }
            },
            computed: {
                cartCount() {
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
                },
                totalItems() {
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
                },
                filteredDishes() {
                    return this.dishes.filter(dish => dish.category === this.currentCategory);
                },
                sortedOrders() {
                    return this.orders.slice().sort((a, b) => b.id - a.id);
                },
                sortedWishes() {
                    return this.wishes.slice().sort((a, b) => b.id - a.id);
                }
            },
            mounted() {
                // ÂàùÂßãÂåñ LeanCloud
                this.initLeanCloud();
                // Âä†ËΩΩÂàÜÁ±ª
                this.loadCategoriesFromCloud();
                // Âä†ËΩΩÊï∞ÊçÆ
                this.loadData();
                // Ê≥®ÂÜå Service WorkerÔºàPWA ÊîØÊåÅÔºâ
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('sw.js').catch(() => {});
                }
            },
            methods: {
                // ÂàùÂßãÂåñ LeanCloud
                initLeanCloud() {
                    // TODO: ËØ∑ÊõøÊç¢‰∏∫ÊÇ®ÁöÑ LeanCloud Â∫îÁî®Âá≠ËØÅ
                    const APP_ID = 'LUSHCmGmYprFyHdyUKNlcsq8-gzGzoHsz'; // ËØ∑ÊõøÊç¢
                    const APP_KEY = 'QSzroCqiHsqFANZsM7VIuObn'; // ËØ∑ÊõøÊç¢
                    const SERVER_URL = 'https://lushcmgm.lc-cn-n1-shared.com'; // ÂõΩÈôÖÁâàÈúÄË¶ÅÔºåÂõΩÂÜÖÁâàÂèØ‰ª•ÁúÅÁï•
                    
                    try {
                        AV.init({
                            appId: APP_ID,
                            appKey: APP_KEY,
                            serverURL: SERVER_URL
                        });
                        console.log('‚úÖ LeanCloud ÂàùÂßãÂåñÊàêÂäü');
                    } catch (error) {
                        console.error('‚ùå LeanCloud ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                        alert('‚ùó LeanCloud ÈÖçÁΩÆÈîôËØØÔºåËØ∑Ê£ÄÊü• APP_ID Âíå APP_KEY');
                    }
                },
                getDifficultyClass(difficulty) {
                    if (difficulty === 'ÁÆÄÂçï') return 'easy';
                    if (difficulty === '‰∏≠Á≠â') return 'medium';
                    if (difficulty === 'Âõ∞Èöæ') return 'hard';
                    return '';
                },
                async loadData() {
                    try {
                        console.log('üîÑ ÂºÄÂßã‰ªé LeanCloud Âä†ËΩΩÊï∞ÊçÆ...');
                        
                        // Âä†ËΩΩËèúÂìÅ
                        const Dish = AV.Object.extend('Dish');
                        const dishQuery = new AV.Query(Dish);
                        dishQuery.limit(1000); // ÊúÄÂ§öÂä†ËΩΩ 1000 Êù°
                        const dishResults = await dishQuery.find();
                        this.dishes = dishResults.map(dish => {
                            // Â§ÑÁêÜÂõæÁâáÂ≠óÊÆµÔºöÂèØËÉΩÊòØÂ≠óÁ¨¶‰∏≤„ÄÅAV.File ÂØπË±°Êàñ undefined
                            let imageValue = dish.get('image');
                            
                            if (imageValue && typeof imageValue === 'object' && imageValue.url) {
                                // Â¶ÇÊûúÊòØ AV.File ÂØπË±°ÔºåËé∑Âèñ URL
                                imageValue = imageValue.url();
                            } else if (typeof imageValue !== 'string') {
                                // undefined ÊàñÂÖ∂‰ªñÊÉÖÂÜµËÆæ‰∏∫Á©∫
                                imageValue = '';
                            }
                            
                            return {
                                id: dish.get('dishId') || dish.id,
                                name: dish.get('name'),
                                category: dish.get('category'),
                                image: imageValue || '',
                                tags: dish.get('tags') || [],
                                difficulty: dish.get('difficulty') || 'ÁÆÄÂçï',
                                steps: dish.get('steps') || ''
                            };
                        });
                        
                        // Âä†ËΩΩËÆ¢Âçï
                        const Order = AV.Object.extend('Order');
                        const orderQuery = new AV.Query(Order);
                        orderQuery.descending('createdAt');
                        orderQuery.limit(1000);
                        const orderResults = await orderQuery.find();
                        this.orders = orderResults.map(order => ({
                            id: order.get('orderId') || order.id,
                            items: order.get('items') || [],
                            total: order.get('total') || 0,
                            status: order.get('status') || 'pending',
                            createdAt: order.get('createdAt') ? order.get('createdAt').toLocaleString('zh-CN') : ''
                        }));
                        
                        // Âä†ËΩΩÂøÉÊÑø
                        const Wish = AV.Object.extend('Wish');
                        const wishQuery = new AV.Query(Wish);
                        wishQuery.descending('createdAt');
                        wishQuery.limit(1000);
                        const wishResults = await wishQuery.find();
                        this.wishes = wishResults.map(wish => ({
                            id: wish.get('wishId') || wish.id,
                            name: wish.get('name'),
                            status: wish.get('status') || 'pending',
                            createdAt: wish.get('createdAt') ? wish.get('createdAt').toLocaleString('zh-CN') : ''
                        }));
                        
                        console.log(`‚úÖ Êï∞ÊçÆÂä†ËΩΩÊàêÂäü: ${this.dishes.length} ÈÅìËèúÂìÅ, ${this.orders.length} ‰∏™ËÆ¢Âçï, ${this.wishes.length} ‰∏™ÂøÉÊÑø`);
                        
                        // ÊÅ¢Â§çË¥≠Áâ©ËΩ¶ÔºàÊú¨Âú∞Êï∞ÊçÆÔºâ
                        const savedCart = localStorage.getItem('cart');
                        if (savedCart) {
                            this.cart = JSON.parse(savedCart);
                        }
                    } catch (error) {
                        console.error('‚ùå ‰ªé LeanCloud Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:', error);
                        alert('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•Êàñ LeanCloud ÈÖçÁΩÆ');
                        // Âä†ËΩΩÈªòËÆ§Êï∞ÊçÆ
                        this.loadDefaultData();
                    }
                },

                loadDefaultData() {
                    // ÈªòËÆ§Á§∫‰æãÊï∞ÊçÆ
                    this.dishes = [
                        { 
                            id: 1, 
                            name: 'Áï™ËåÑÁÇíËõã',
                            category: 'Ëî¨Ëèú',
                            image: '',
                            tags: ['ÂÆ∂Â∏∏', 'ÁÆÄÂçï'], 
                            difficulty: 'ÁÆÄÂçï', 
                            steps: '1. È∏°ËõãÊâìÊï£\n2. Áï™ËåÑÂàáÂùó\n3. ÁÉ≠ÈîÖÁÇíËõã\n4. Âä†Áï™ËåÑÁøªÁÇí' 
                        },
                        { 
                            id: 2, 
                            name: 'Á∫¢ÁÉßËÇâ',
                            category: 'Áé∞ÁÇíËÇâÁ±ª',
                            image: '',
                            tags: ['Ëç§Ëèú', '‰∏ãÈ•≠'], 
                            difficulty: '‰∏≠Á≠â', 
                            steps: '1. ‰∫îËä±ËÇâÂàáÂùó\n2. ÁÑ¶Ê∞¥ÂéªËÖ•\n3. ÁÇíÁ≥ñËâ≤\n4. ÁÇñÁÖÆ40ÂàÜÈíü' 
                        }
                    ];
                    // ‰∏çÂÜç‰øùÂ≠òÂà∞ localStorage
                },
                getCategoryCount(category) {
                    return this.dishes.filter(dish => dish.category === category).length;
                },
                getDishQuantity(dishId) {
                    const item = this.cart.find(item => item.id === dishId);
                    return item ? item.quantity : 0;
                },
                toggleDishExpand(dishId) {
                    this.expandedDishes[dishId] = !this.expandedDishes[dishId];
                },
                isDishExpanded(dishId) {
                    return this.expandedDishes[dishId] || false;
                },
                isDishStepsTruncated(steps) {
                    if (!steps) return false;
                    const lines = steps.split('\n').length;
                    return lines > 2 || steps.length > 100;
                },
                increaseDishQty(dish) {
                    const existing = this.cart.find(item => item.id === dish.id);
                    if (existing) {
                        existing.quantity++;
                    } else {
                        this.cart.push({ ...dish, quantity: 1 });
                    }
                    this.saveCart();
                },
                decreaseDishQty(dish) {
                    const existing = this.cart.find(item => item.id === dish.id);
                    if (existing) {
                        if (existing.quantity > 1) {
                            existing.quantity--;
                        } else {
                            this.cart = this.cart.filter(item => item.id !== dish.id);
                        }
                        this.saveCart();
                    }
                },
                handleImageUpload(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.newDish.image = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                },
                removeImage() {
                    this.newDish.image = '';
                },
                toggleForm() {
                    this.showForm = !this.showForm;
                },
                openAdminModal() {
                    this.showAdminModal = true;
                },
                closeAdminModal() {
                    this.showAdminModal = false;
                },
                openOrderModal() {
                    this.showOrderModal = true;
                },
                closeOrderModal() {
                    this.showOrderModal = false;
                },
                openWishModal() {
                    this.showWishModal = true;
                },
                closeWishModal() {
                    this.showWishModal = false;
                },
                exportDataDialog() {
                    this.showExportDialog = true;
                },
                closeExportDialog() {
                    this.showExportDialog = false;
                },
                toggleCartDrawer() {
                    this.showCartDrawer = !this.showCartDrawer;
                },
                closeCartDrawer() {
                    this.showCartDrawer = false;
                },
                async addDish() {
                    if (!this.newDish.name || !this.newDish.category) {
                        alert('ËØ∑Â°´ÂÜôËèúÂêçÂíåÂàÜÁ±ª');
                        return;
                    }
                    
                    // Èò≤Ê≠¢ÈáçÂ§çÊèê‰∫§
                    if (this.isSubmitting) {
                        return;
                    }
                    
                    this.isSubmitting = true;
                    
                    const tags = this.newDish.tagsStr
                        ? this.newDish.tagsStr.split(',').map(t => t.trim()).filter(t => t)
                        : [];
                    
                    const dishId = Date.now();
                    const dish = {
                        id: dishId,
                        name: this.newDish.name,
                        category: this.newDish.category,
                        image: this.newDish.image,
                        tags: tags,
                        difficulty: this.newDish.difficulty,
                        steps: this.newDish.steps
                    };
                    
                    try {
                        let imageFile = null;
                        
                        // Â¶ÇÊûúÊúâÂõæÁâáÔºåÂ∞Ü Base64 ËΩ¨Êç¢‰∏∫ LeanCloud File
                        if (dish.image) {
                            // ÊèêÂèñ Base64 Êï∞ÊçÆ
                            const base64Data = dish.image.split(',')[1] || dish.image;
                            const contentType = dish.image.match(/data:(.*?);/)?.[1] || 'image/png';
                            
                            // ËΩ¨Êç¢‰∏∫ Blob
                            const byteCharacters = atob(base64Data);
                            const byteArrays = [];
                            for (let i = 0; i < byteCharacters.length; i++) {
                                byteArrays.push(byteCharacters.charCodeAt(i));
                            }
                            const blob = new Blob([new Uint8Array(byteArrays)], { type: contentType });
                            
                            // ÂàõÂª∫ LeanCloud File
                            const fileName = `dish_${dishId}.png`;
                            imageFile = new AV.File(fileName, blob);
                            await imageFile.save();
                            
                            console.log('‚úÖ ÂõæÁâáÂ∑≤‰∏ä‰º†Âà∞ LeanCloud');
                        }
                        
                        // ‰øùÂ≠òÂà∞ LeanCloud
                        const Dish = AV.Object.extend('Dish');
                        const dishObj = new Dish();
                        dishObj.set('dishId', dishId);
                        dishObj.set('name', dish.name);
                        dishObj.set('category', dish.category);
                        dishObj.set('image', imageFile); // ‰øùÂ≠ò File ÂØπË±°ÔºåËÄå‰∏çÊòØ Base64
                        dishObj.set('tags', dish.tags);
                        dishObj.set('difficulty', dish.difficulty);
                        dishObj.set('steps', dish.steps);
                        await dishObj.save();
                        
                        // Êõ¥Êñ∞Êú¨Âú∞Êï∞ÊçÆ‰∏∫ÂõæÁâá URL
                        if (imageFile) {
                            dish.image = imageFile.url();
                        }
                        
                        // Ê∑ªÂä†Âà∞Êú¨Âú∞ÂàóË°®
                        this.dishes.push(dish);
                        
                        // ÈáçÁΩÆË°®Âçï
                        this.newDish = {
                            name: '',
                            category: '',
                            image: '',
                            tagsStr: '',
                            difficulty: 'ÁÆÄÂçï',
                            steps: ''
                        };
                        
                        // ÂàáÊç¢Âà∞Êñ∞Â¢ûËèúÂìÅÁöÑÂàÜÁ±ª
                        this.currentCategory = dish.category;
                        // ÂàáÊç¢Âà∞ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ
                        this.adminTab = 'manage';
                        
                        alert('‚úÖ ËèúÂìÅÊ∑ªÂä†ÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå Ê∑ªÂä†ËèúÂìÅÂ§±Ë¥•:', error);
                        alert('Ê∑ªÂä†Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    } finally {
                        this.isSubmitting = false;
                    }
                },
                async deleteDish(id) {
                    if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÈÅìËèúÂêóÔºü')) return;
                    
                    try {
                        // ‰ªé LeanCloud Âà†Èô§
                        const Dish = AV.Object.extend('Dish');
                        const query = new AV.Query(Dish);
                        query.equalTo('dishId', id);
                        const dishObj = await query.first();
                        if (dishObj) {
                            await dishObj.destroy();
                        }
                        
                        // ‰ªéÊú¨Âú∞Âà†Èô§
                        this.dishes = this.dishes.filter(d => d.id !== id);
                        alert('‚úÖ Âà†Èô§ÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå Âà†Èô§ËèúÂìÅÂ§±Ë¥•:', error);
                        alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                startEditDish(dish) {
                    this.editingDishId = dish.id;
                    this.editingDish = {
                        name: dish.name,
                        category: dish.category,
                        image: dish.image || '',
                        tagsStr: dish.tags ? dish.tags.join(', ') : '',
                        difficulty: dish.difficulty,
                        steps: dish.steps || ''
                    };
                },
                cancelEdit() {
                    this.editingDishId = null;
                    this.editingDish = {
                        name: '',
                        category: '',
                        image: '',
                        tagsStr: '',
                        difficulty: 'ÁÆÄÂçï',
                        steps: ''
                    };
                },
                async saveEdit() {
                    if (!this.editingDish.name || !this.editingDish.category) {
                        alert('ËØ∑Â°´ÂÜôËèúÂêçÂíåÂàÜÁ±ª');
                        return;
                    }
                    
                    // Èò≤Ê≠¢ÈáçÂ§çÊèê‰∫§
                    if (this.isSubmitting) {
                        return;
                    }
                    
                    this.isSubmitting = true;
                    
                    const dish = this.dishes.find(d => d.id === this.editingDishId);
                    if (!dish) {
                        this.isSubmitting = false;
                        return;
                    }
                    
                    const tags = this.editingDish.tagsStr
                        ? this.editingDish.tagsStr.split(',').map(t => t.trim()).filter(t => t)
                        : [];
                    
                    try {
                        let imageFile = null;
                        
                        // Â¶ÇÊûúÂõæÁâáÊúâÊõ¥Êîπ‰∏îÊòØ Base64 Ê†ºÂºèÔºåËΩ¨Êç¢‰∏∫ LeanCloud File
                        if (this.editingDish.image && this.editingDish.image.startsWith('data:')) {
                            const base64Data = this.editingDish.image.split(',')[1] || this.editingDish.image;
                            const contentType = this.editingDish.image.match(/data:(.*?);/)?.[1] || 'image/png';
                            
                            const byteCharacters = atob(base64Data);
                            const byteArrays = [];
                            for (let i = 0; i < byteCharacters.length; i++) {
                                byteArrays.push(byteCharacters.charCodeAt(i));
                            }
                            const blob = new Blob([new Uint8Array(byteArrays)], { type: contentType });
                            
                            const fileName = `dish_${this.editingDishId}_${Date.now()}.png`;
                            imageFile = new AV.File(fileName, blob);
                            await imageFile.save();
                            
                            console.log('‚úÖ ÂõæÁâáÂ∑≤Êõ¥Êñ∞Âà∞ LeanCloud');
                        }
                        
                        // Êõ¥Êñ∞ LeanCloud
                        const Dish = AV.Object.extend('Dish');
                        const query = new AV.Query(Dish);
                        query.equalTo('dishId', this.editingDishId);
                        const dishObj = await query.first();
                        
                        if (dishObj) {
                            dishObj.set('name', this.editingDish.name);
                            dishObj.set('category', this.editingDish.category);
                            // Â¶ÇÊûúÊúâÊñ∞ÂõæÁâáÔºå‰ΩøÁî® File ÂØπË±°ÔºõÂê¶Âàô‰øùÊåÅÂéüÊ†∑
                            if (imageFile) {
                                dishObj.set('image', imageFile);
                            } else if (this.editingDish.image) {
                                // Â¶ÇÊûúÊòØ URLÔºå‰∏çÂèòÔºà‰∏çÈáçÊñ∞ËÆæÁΩÆÔºâ
                            } else {
                                // Â¶ÇÊûúÊ∏ÖÁ©∫ÂõæÁâá
                                dishObj.set('image', null);
                            }
                            dishObj.set('tags', tags);
                            dishObj.set('difficulty', this.editingDish.difficulty);
                            dishObj.set('steps', this.editingDish.steps);
                            await dishObj.save();
                        }
                        
                        // Êõ¥Êñ∞Êú¨Âú∞Êï∞ÊçÆ
                        dish.name = this.editingDish.name;
                        dish.category = this.editingDish.category;
                        if (imageFile) {
                            dish.image = imageFile.url();
                        } else {
                            dish.image = this.editingDish.image;
                        }
                        dish.tags = tags;
                        dish.difficulty = this.editingDish.difficulty;
                        dish.steps = this.editingDish.steps;
                        
                        this.cancelEdit();
                        alert('‚úÖ ËèúÂìÅ‰øÆÊîπÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå ‰øÆÊîπËèúÂìÅÂ§±Ë¥•:', error);
                        alert('‰øÆÊîπÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    } finally {
                        this.isSubmitting = false;
                    }
                },
                handleEditImageUpload(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.editingDish.image = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                },
                removeEditImage() {
                    this.editingDish.image = '';
                },
                addToCart(dish) {
                    const existing = this.cart.find(item => item.id === dish.id);
                    if (existing) {
                        existing.quantity++;
                    } else {
                        this.cart.push({ ...dish, quantity: 1 });
                    }
                    this.saveCart();
                },
                removeFromCart(id) {
                    this.cart = this.cart.filter(item => item.id !== id);
                    this.saveCart();
                },
                increaseQty(item) {
                    item.quantity++;
                    this.saveCart();
                },
                decreaseQty(item) {
                    if (item.quantity > 1) {
                        item.quantity--;
                        this.saveCart();
                    } else {
                        this.removeFromCart(item.id);
                    }
                },
                async placeOrder() {
                    if (this.cart.length === 0) {
                        alert('üõí Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑÔºåÂø´ÂéªÊ∑ªÂä†ËèúÂìÅÂêßÔºÅ');
                        return;
                    }
                    
                    const orderId = Date.now();
                    const order = {
                        id: orderId,
                        items: [...this.cart],
                        total: this.totalItems,
                        createdAt: new Date().toLocaleString('zh-CN'),
                        status: 'pending'
                    };
                    
                    try {
                        // ‰øùÂ≠òÂà∞ LeanCloud
                        const Order = AV.Object.extend('Order');
                        const orderObj = new Order();
                        orderObj.set('orderId', orderId);
                        orderObj.set('items', order.items);
                        orderObj.set('total', order.total);
                        orderObj.set('status', order.status);
                        await orderObj.save();
                        
                        // Ê∑ªÂä†Âà∞Êú¨Âú∞ÂàóË°®
                        this.orders.push(order);
                        
                        // Ê∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶
                        this.cart = [];
                        this.saveCart();
                        this.closeCartDrawer();
                        
                        // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                        alert(`‚úÖ ‰∏ãÂçïÊàêÂäüÔºÅ

üç≤ ÂÖ± ${order.total} ÈÅìËèú
üïí Êó∂Èó¥Ôºö${order.createdAt}

Ë¥≠Áâ©ËΩ¶Â∑≤Ëá™Âä®Ê∏ÖÁ©∫`);
                    } catch (error) {
                        console.error('‚ùå ‰∏ãÂçïÂ§±Ë¥•:', error);
                        alert('‰∏ãÂçïÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                async completeOrder(orderId) {
                    try {
                        // Êõ¥Êñ∞ LeanCloud
                        const Order = AV.Object.extend('Order');
                        const query = new AV.Query(Order);
                        query.equalTo('orderId', orderId);
                        const orderObj = await query.first();
                        if (orderObj) {
                            orderObj.set('status', 'completed');
                            await orderObj.save();
                        }
                        
                        // Êõ¥Êñ∞Êú¨Âú∞Êï∞ÊçÆ
                        const order = this.orders.find(o => o.id === orderId);
                        if (order) {
                            order.status = 'completed';
                        }
                    } catch (error) {
                        console.error('‚ùå Êõ¥Êñ∞ËÆ¢ÂçïÂ§±Ë¥•:', error);
                        alert('Êõ¥Êñ∞Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                async deleteOrder(orderId) {
                    if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ËÆ¢ÂçïÂêóÔºü')) return;
                    
                    try {
                        // ‰ªé LeanCloud Âà†Èô§
                        const Order = AV.Object.extend('Order');
                        const query = new AV.Query(Order);
                        query.equalTo('orderId', orderId);
                        const orderObj = await query.first();
                        if (orderObj) {
                            await orderObj.destroy();
                        }
                        
                        // ‰ªéÊú¨Âú∞Âà†Èô§
                        this.orders = this.orders.filter(o => o.id !== orderId);
                    } catch (error) {
                        console.error('‚ùå Âà†Èô§ËÆ¢ÂçïÂ§±Ë¥•:', error);
                        alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                saveDishes() {
                    // ‰∏ç‰øùÂ≠òÂà∞ localStorageÔºåÁõ¥Êé•‰øùÂ≠òÂà∞ LeanCloud
                    // Ê≥®ÊÑèÔºöËèúÂìÅÂ∑≤ÁªèÂú® addDish/saveEdit/deleteDish ‰∏≠ÂçïÁã¨‰øùÂ≠òÔºåËøôÈáå‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÊìç‰Ωú
                    console.log('üíæ ËèúÂìÅÂ∑≤Êõ¥Êñ∞');
                },
                saveCart() {
                    localStorage.setItem('cart', JSON.stringify(this.cart));
                },
                async saveOrders() {
                    // ËÆ¢ÂçïÂ∑≤ÁªèÂú® placeOrder/completeOrder/deleteOrder ‰∏≠ÂçïÁã¨‰øùÂ≠ò
                    console.log('üíæ ËÆ¢ÂçïÂ∑≤Êõ¥Êñ∞');
                },
                async addWish() {
                    if (!this.newWish.name.trim()) {
                        alert('ËØ∑ËæìÂÖ•ÊÉ≥ÂêÉÁöÑËèúÂêç');
                        return;
                    }
                    
                    const wishId = Date.now();
                    const wish = {
                        id: wishId,
                        name: this.newWish.name.trim(),
                        note: this.newWish.note.trim(),
                        status: 'pending',
                        createdAt: new Date().toLocaleString('zh-CN')
                    };
                    
                    try {
                        // ‰øùÂ≠òÂà∞ LeanCloud
                        const Wish = AV.Object.extend('Wish');
                        const wishObj = new Wish();
                        wishObj.set('wishId', wishId);
                        wishObj.set('name', wish.name);
                        wishObj.set('status', wish.status);
                        await wishObj.save();
                        
                        // Ê∑ªÂä†Âà∞Êú¨Âú∞ÂàóË°®
                        this.wishes.push(wish);
                        this.newWish = { name: '', note: '' };
                        alert('‚úÖ ÂøÉÊÑøÊ∑ªÂä†ÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå Ê∑ªÂä†ÂøÉÊÑøÂ§±Ë¥•:', error);
                        alert('Ê∑ªÂä†Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                async updateWishStatus(wishId, newStatus) {
                    try {
                        // Êõ¥Êñ∞ LeanCloud
                        const Wish = AV.Object.extend('Wish');
                        const query = new AV.Query(Wish);
                        query.equalTo('wishId', wishId);
                        const wishObj = await query.first();
                        if (wishObj) {
                            wishObj.set('status', newStatus);
                            await wishObj.save();
                        }
                        
                        // Êõ¥Êñ∞Êú¨Âú∞Êï∞ÊçÆ
                        const wish = this.wishes.find(w => w.id === wishId);
                        if (wish) {
                            wish.status = newStatus;
                        }
                    } catch (error) {
                        console.error('‚ùå Êõ¥Êñ∞ÂøÉÊÑøÂ§±Ë¥•:', error);
                        alert('Êõ¥Êñ∞Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                async deleteWish(wishId) {
                    if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÂøÉÊÑøÂêóÔºü')) return;
                    
                    try {
                        // ‰ªé LeanCloud Âà†Èô§
                        const Wish = AV.Object.extend('Wish');
                        const query = new AV.Query(Wish);
                        query.equalTo('wishId', wishId);
                        const wishObj = await query.first();
                        if (wishObj) {
                            await wishObj.destroy();
                        }
                        
                        // ‰ªéÊú¨Âú∞Âà†Èô§
                        this.wishes = this.wishes.filter(w => w.id !== wishId);
                    } catch (error) {
                        console.error('‚ùå Âà†Èô§ÂøÉÊÑøÂ§±Ë¥•:', error);
                        alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },

                // ÂàÜÁ±ªÁÆ°ÁêÜ
                async addCategory() {
                    const categoryName = this.newCategoryName.trim();
                    if (!categoryName) {
                        alert('ËØ∑ËæìÂÖ•ÂàÜÁ±ªÂêçÁß∞');
                        return;
                    }
                    
                    if (this.categories.includes(categoryName)) {
                        alert('ËØ•ÂàÜÁ±ªÂ∑≤Â≠òÂú®ÔºÅ');
                        return;
                    }
                    
                    try {
                        // Ê∑ªÂä†Âà∞Êú¨Âú∞
                        this.categories.push(categoryName);
                        
                        // ‰øùÂ≠òÂà∞ LeanCloud
                        await this.saveCategoriesToCloud();
                        
                        this.newCategoryName = '';
                        alert('‚úÖ ÂàÜÁ±ªÊ∑ªÂä†ÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå Ê∑ªÂä†ÂàÜÁ±ªÂ§±Ë¥•:', error);
                        // ÂõûÊªö
                        this.categories.pop();
                        alert('Ê∑ªÂä†Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                
                async deleteCategory(categoryName) {
                    const count = this.getCategoryCount(categoryName);
                    if (count > 0) {
                        alert(`Êó†Ê≥ïÂà†Èô§ÔºÅ\n\nËØ•ÂàÜÁ±ª‰∏ãËøòÊúâ ${count} ÈÅìËèúÂìÅ„ÄÇ\nËØ∑ÂÖàÂà†Èô§ÊàñÁßªÂä®Ëøô‰∫õËèúÂìÅÂà∞ÂÖ∂‰ªñÂàÜÁ±ª„ÄÇ`);
                        return;
                    }
                    
                    if (!confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§ÂàÜÁ±ª‚Äú${categoryName}‚ÄùÂêóÔºü`)) {
                        return;
                    }
                    
                    try {
                        // ‰ªéÊú¨Âú∞Âà†Èô§
                        const index = this.categories.indexOf(categoryName);
                        if (index > -1) {
                            this.categories.splice(index, 1);
                        }
                        
                        // ‰øùÂ≠òÂà∞ LeanCloud
                        await this.saveCategoriesToCloud();
                        
                        alert('‚úÖ ÂàÜÁ±ªÂà†Èô§ÊàêÂäüÔºÅ');
                    } catch (error) {
                        console.error('‚ùå Âà†Èô§ÂàÜÁ±ªÂ§±Ë¥•:', error);
                        // ÂõûÊªö
                        this.categories.splice(index, 0, categoryName);
                        alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                },
                
                async saveCategoriesToCloud() {
                    try {
                        // Â∞ÜÂàÜÁ±ª‰øùÂ≠òÂà∞ LeanCloud ÁöÑÈÖçÁΩÆË°®
                        const Config = AV.Object.extend('Config');
                        const query = new AV.Query(Config);
                        query.equalTo('key', 'categories');
                        
                        let configObj = await query.first();
                        if (!configObj) {
                            configObj = new Config();
                            configObj.set('key', 'categories');
                        }
                        
                        configObj.set('value', this.categories);
                        
                        // ËÆæÁΩÆ ACLÔºàËÆøÈóÆÊéßÂà∂ÔºâÔºåÂÖÅËÆ∏ÊâÄÊúâ‰∫∫ËØªÂÜô
                        const acl = new AV.ACL();
                        acl.setPublicReadAccess(true);
                        acl.setPublicWriteAccess(true);
                        configObj.setACL(acl);
                        
                        await configObj.save();
                        console.log('‚úÖ ÂàÜÁ±ªÂ∑≤‰øùÂ≠òÂà∞‰∫ëÁ´Ø');
                    } catch (error) {
                        console.error('‚ùå ‰øùÂ≠òÂàÜÁ±ªÂà∞‰∫ëÁ´ØÂ§±Ë¥•:', error);
                        throw error;
                    }
                },
                
                async loadCategoriesFromCloud() {
                    try {
                        const Config = AV.Object.extend('Config');
                        const query = new AV.Query(Config);
                        query.equalTo('key', 'categories');
                        const configObj = await query.first();
                        
                        if (configObj) {
                            const cloudCategories = configObj.get('value');
                            if (cloudCategories && Array.isArray(cloudCategories)) {
                                this.categories = cloudCategories;
                                console.log('‚úÖ ÂàÜÁ±ª‰ªé‰∫ëÁ´ØÂä†ËΩΩÊàêÂäü');
                            }
                        }
                    } catch (error) {
                        console.log('‚ö†Ô∏è Âä†ËΩΩÂàÜÁ±ªÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§ÂàÜÁ±ª:', error);
                    }
                },

                // Á°ÆËÆ§ÂØºÂá∫Êï∞ÊçÆ
                async confirmExportData() {
                    try {
                        // ‰ªé‰∫ëÁ´ØÈáçÊñ∞Âä†ËΩΩÊúÄÊñ∞Êï∞ÊçÆ
                        await this.loadData();
                        
                        // ÂáÜÂ§áÂØºÂá∫Êï∞ÊçÆ
                        const exportData = {
                            version: '2.0',
                            exportTime: new Date().toLocaleString('zh-CN'),
                            source: 'LeanCloud',
                            dishes: this.dishes.map(dish => ({
                                id: dish.id,
                                name: dish.name,
                                category: dish.category,
                                image: dish.image || '',
                                tags: dish.tags || [],
                                difficulty: dish.difficulty || 'ÁÆÄÂçï',
                                steps: dish.steps || '',
                                quantity: dish.quantity || 0
                            })),
                            orders: this.orders.map(order => ({
                                id: order.id,
                                items: order.items,
                                total: order.total,
                                status: order.status,
                                createdAt: order.createdAt
                            })),
                            wishes: this.wishes.map(wish => ({
                                name: wish.name,
                                status: wish.status,
                                createdAt: wish.createdAt
                            }))
                        };
                        
                        // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
                        const dataStr = JSON.stringify(exportData, null, 2);
                        const dataBlob = new Blob([dataStr], { type: 'application/json' });
                        const url = URL.createObjectURL(dataBlob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = `ËèúË∞±Êï∞ÊçÆÂ§á‰ªΩ_${new Date().getTime()}.json`;
                        link.click();
                        URL.revokeObjectURL(url);
                        
                        this.closeExportDialog();
                        alert('‚úÖ Êï∞ÊçÆÂØºÂá∫ÊàêÂäüÔºÅ\n\nüìÅ Êñá‰ª∂Â∑≤‰øùÂ≠òÂà∞‰∏ãËΩΩÊñá‰ª∂Â§π\nüí° Âª∫ËÆÆÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆ‰ª•Á°Æ‰øùÂÆâÂÖ®');
                    } catch (error) {
                        console.error('ÂØºÂá∫Â§±Ë¥•:', error);
                        alert('‚ùå ÂØºÂá∫Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                    }
                }
            }
        }).mount('#app');

        // Ëá™ÈÄÇÂ∫îÁ≠âÊØî‰æãÁº©ÊîæÔºà‰øùÊåÅÂ∏ÉÂ±Ä‰∏ÄËá¥Ôºâ
        function autoScale() {
            const designWidth = 1200; // ËÆæËÆ°Âü∫ÂáÜÂÆΩÂ∫¶
            const screenWidth = window.innerWidth;
            
            // ËÆ°ÁÆóÁº©ÊîæÊØî‰æãÔºàÊúÄÂ§ß‰∏çË∂ÖËøá1.0ÔºåÈÅøÂÖçÊîæÂ§ßÔºâ
            let scale = Math.min(screenWidth / designWidth, 1.0);
            
            // ‰ΩøÁî® zoom Â±ûÊÄßËøõË°åÁ≠âÊØî‰æãÁº©Êîæ
            document.body.style.zoom = scale;
            
            // ‰øÆÂ§ç zoom ÂêéÁöÑÈ´òÂ∫¶ÈóÆÈ¢ò
            const app = document.querySelector('.app');
            if (app && scale < 1.0) {
                // ËÆ°ÁÆóÁº©ÊîæÂêéÈúÄË¶ÅÁöÑÂÆûÈôÖÈ´òÂ∫¶
                const viewportHeight = window.innerHeight;
                const scaledHeight = viewportHeight / scale;
                app.style.minHeight = scaledHeight + 'px';
            } else if (app) {
                app.style.minHeight = '100vh';
            }
            
            console.log(`üì± Â±èÂπïÂÆΩÂ∫¶: ${screenWidth}px, Áº©ÊîæÊØî‰æã: ${(scale * 100).toFixed(1)}%`);
        }

        // È°µÈù¢Âä†ËΩΩÂíåÁ™óÂè£Â§ßÂ∞èÂèòÂåñÊó∂ÈáçÊñ∞ËÆ°ÁÆó
        window.addEventListener('load', autoScale);
        window.addEventListener('resize', autoScale);
    </script>
</body>
</html>
